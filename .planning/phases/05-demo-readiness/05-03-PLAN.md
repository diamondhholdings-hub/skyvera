---
phase: 05-demo-readiness
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/warmup-cache.ts
  - scripts/generate-demo-data.ts
  - package.json
autonomous: true

must_haves:
  truths:
    - "All 140 customer accounts have demo-ready data with realistic financial metrics"
    - "Hero accounts (British Telecom, Liquid Telecom, Telefonica UK, Spotify, AT&T) load instantly from pre-warmed cache"
    - "Running npm run warmup pre-populates cache for hero accounts and verifies data coverage"
  artifacts:
    - path: "scripts/warmup-cache.ts"
      provides: "Cache warmup script for hero account intelligence pre-computation"
      contains: "HERO_ACCOUNTS"
    - path: "scripts/generate-demo-data.ts"
      provides: "Generates account plan JSON files for all 140 customers missing data"
      contains: "generate"
    - path: "package.json"
      provides: "warmup and generate-demo-data npm scripts"
      contains: "warmup"
  key_links:
    - from: "scripts/warmup-cache.ts"
      to: "src/lib/intelligence/claude/orchestrator.ts"
      via: "ClaudeOrchestrator for intelligence generation"
      pattern: "ClaudeOrchestrator"
    - from: "scripts/generate-demo-data.ts"
      to: "data/account-plans/"
      via: "writes JSON files for stakeholders, strategy, competitors, actions"
      pattern: "writeFileSync"
---

<objective>
Ensure all 140 customer accounts have demo-ready data and create a cache warmup script for hero accounts.

Purpose: CONTEXT.md requires "All 140 customer accounts need full intelligence data" and "Pre-compute for hero accounts." Currently only 5 hero accounts have stakeholder/strategy/competitor/action data files, and only 10 accounts have news data. This plan creates a script to generate baseline account plan data for remaining 135 accounts and a warmup script to pre-compute Claude intelligence for hero accounts before demo.

Output: generate-demo-data.ts script that fills data gaps, warmup-cache.ts for hero account pre-computation, npm scripts for both.
</objective>

<execution_context>
@/Users/RAZER/.claude/get-shit-done/workflows/execute-plan.md
@/Users/RAZER/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-demo-readiness/05-CONTEXT.md
@src/lib/data/server/account-plan-data.ts
@src/lib/intelligence/claude/orchestrator.ts
@src/lib/cache/manager.ts
@src/lib/types/account-plan.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate baseline demo data for all 140 accounts</name>
  <files>
    scripts/generate-demo-data.ts
    package.json
  </files>
  <action>
    Create scripts/generate-demo-data.ts that fills data gaps for all 140 accounts.

    The script should:
    1. Read all customer JSON files from data/ directory (customers_cloudsense_all.json, customers_kandy_all.json, customers_stl_all.json, customers_newnet_all.json) to get the complete list of 140 customer names
    2. For each customer, check if account plan data files exist:
       - data/account-plans/stakeholders/{slug}.json
       - data/account-plans/strategy/{slug}.json
       - data/account-plans/competitors/{slug}.json
       - data/account-plans/actions/{slug}.json
    3. If ANY files are missing for a customer, generate them with realistic template data:

    Stakeholders template (array of 2-3 stakeholders):
    - VP/Director level contacts with title, email pattern ({first}.{last}@{company-domain}), role (ACCOUNTABLE/RESPONSIBLE/CONSULTED)
    - reportsTo relationship (one reports to another)
    - Relationship strength: "strong" for primary, "moderate" for others

    Strategy template:
    - painPoints: 2 items (e.g., "Legacy system modernization pressure", "Cost optimization needs")
    - opportunities: 2 items (e.g., "Cloud migration initiative", "Digital transformation program")
    - Each with status ("identified" or "in_progress"), impact ("high" or "medium"), description

    Competitors template (array of 1-2):
    - Common telecom/SaaS competitors: "Amdocs", "NetCracker", "CSG International", "Ericsson"
    - Threat level: "medium", products: ["BSS/OSS Platform"]
    - relationship: "incumbent" or "challenger"

    Actions template: empty array [] (users create these in the Kanban board)

    Use the slugifyCustomerName function from account-plan-data.ts (copy the logic into the script since it runs standalone).

    The slug format: lowercase, spaces to hyphens, & to "and", remove commas/periods/parens.

    IMPORTANT: Only generate files that DON'T already exist. Skip hero accounts that already have rich data.

    Add to package.json scripts: `"generate-demo-data": "npx tsx scripts/generate-demo-data.ts"`

    The script should output progress: "Generated data for {name}" for each new file, and a summary at the end: "Generated: {N} accounts, Skipped (already exist): {M} accounts"
  </action>
  <verify>
    Run `npx tsx scripts/generate-demo-data.ts` should complete without errors.
    Run `ls data/account-plans/stakeholders/ | wc -l` should show significantly more than 5 files (ideally ~140).
    Run `ls data/account-plans/strategy/ | wc -l` should match stakeholder count.
  </verify>
  <done>
    All 140 customer accounts have baseline stakeholder, strategy, competitor, and action data files. Hero account rich data is preserved. Script is idempotent (re-running skips existing files).
  </done>
</task>

<task type="auto">
  <name>Task 2: Cache warmup script for hero accounts</name>
  <files>
    scripts/warmup-cache.ts
    package.json
  </files>
  <action>
    Create scripts/warmup-cache.ts that pre-computes intelligence for hero accounts.

    The script should:
    1. Define HERO_ACCOUNTS: ['British Telecommunications plc', 'Liquid Telecom', 'Telefonica UK Limited', 'Spotify', 'AT&T Services, Inc.']
       (Use exact names from customer JSON files, not abbreviated names)
    2. Initialize the ConnectorFactory to load Excel data (needed for financial context)
    3. For each hero account:
       a. Load account plan data (stakeholders, strategy, competitors, news) from data/ files
       b. If Claude API key is available (process.env.ANTHROPIC_API_KEY), generate intelligence:
          - Use ClaudeOrchestrator to generate account intelligence
          - Cache result with 30-minute TTL (demo stability)
          - Log "Cached intelligence for {name}"
       c. If Claude API key is NOT available, log warning and skip intelligence generation
       d. Pre-load financial data from Excel adapter into cache
    4. Verify cache status: For each hero account, check cache has intelligence entry, log status
    5. Output summary: "Warmup complete: {N}/{5} hero accounts cached. Demo ready." or warnings

    The script should use Promise.allSettled for parallel processing (not sequential) to be fast.
    Add rate limiting pause (2 second delay between Claude API calls) to avoid 429 errors.

    Add to package.json scripts: `"warmup": "npx tsx scripts/warmup-cache.ts"`

    IMPORTANT: This script runs in Node.js, not in the browser. It needs to:
    - Use dotenv to load .env file: `import 'dotenv/config'`
    - Import from src/ using path aliases (ensure tsx resolves @/ paths, or use relative imports)
    - Handle the case where Claude API key is missing gracefully (warn, don't crash)

    If path aliases don't work with tsx, use relative imports from scripts/ directory instead (e.g., `import { getCacheManager } from '../src/lib/cache/manager'`).
  </action>
  <verify>
    Run `npx tsx scripts/warmup-cache.ts` should complete without crashing (even without API keys -- it should warn and skip intelligence generation).
    Check output includes "Warmup complete" message.
    Run `npm run warmup` should execute the script via package.json.
  </verify>
  <done>
    Running `npm run warmup` pre-computes intelligence for 5 hero accounts (when API key available) and caches results for 30 minutes. Script handles missing API keys gracefully. Demo startup checklist: run warmup 10 minutes before demo.
  </done>
</task>

</tasks>

<verification>
- `npx tsx scripts/generate-demo-data.ts` completes and all 140 accounts have data files
- `npx tsx scripts/warmup-cache.ts` completes without crash (with or without API keys)
- `npm run warmup` and `npm run generate-demo-data` are valid npm scripts
- `ls data/account-plans/stakeholders/ | wc -l` shows ~140 files
- Hero account data files (5 originals) are not overwritten
</verification>

<success_criteria>
All 140 customer accounts have account plan data files (stakeholders, strategy, competitors, actions). Hero accounts have rich pre-existing data preserved. Cache warmup script pre-computes intelligence for hero accounts in under 2 minutes. Both scripts registered as npm scripts and handle errors gracefully.
</success_criteria>

<output>
After completion, create `.planning/phases/05-demo-readiness/05-03-SUMMARY.md`
</output>
